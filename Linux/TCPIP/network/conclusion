[网络层]: 负责地址管理与路由选择
  
[IP数据报信息]:
  报头:
  1. 4位版本: 描述地址域, IPV4/IPV6
     4位首部长度(单位为4个字节): 描述报头的长度, 最小为20字节
     8位服务类型(TOS): 3位弃用, 1位保留, 4位描述其服务类型(最小延时, 最大吞吐量, 最高可靠性, 最小成本)
       比如说聊天数据与文件传输数据的的网络带宽
     16位数据报长度: 描述数据报的总长度
       最大为65535, 但是链路层要求的数据最大为1500, 因此如果大于1500需要进行分片 
  2. 16为标识: 描述唯一标识的数据报, 数据报在链路层分片后可以通过标识来找到原始数据报
       用来标识分片的数据属于哪一个分组
     3位标志: 描述分片状态, 1位保留, 1位禁止分片, 1位结束分片
       用来表示分片信息的, 比如说是否是分片, 是否是最后一个分片
     13位片偏移(单位是8个字节): 描述分片后的数据在原始数据中的偏移量
       用来表示该分片在数据包中的哪个位置
  3. 8位生存周期(TTL): 描述数据所能经过路由器的最大跳数, 一般为64(linux), 256(windows)
       (防止产生环路, 数据转发不出去占带宽的情况)
     8位上层协议: 描述传输层的协议, 用于数据分用
       比如说ICMP, IGMP, TCP, UDP等
     16位校验和: 检验数据的一致性
       反码求和算法
  4. 32位源/目的IP地址: 描述发送端与接收端
  5. 40字节的选项
  报文:
  1. 数据

[网络层需要解决的问题]:
1. 封装成包
  在网络层需要将源IP地址与目的IP地址等信息进行封装
2. 数据分片
  因为数据帧限制上层的数据包大小不能超过1500, 
  而网络层数据包最大为65535, 如果数据包大小大于1500字节, 需要进行分片,
  将数据包分成多个小数据包, 在头部记录好数据包分组与偏移量等信息.
  因此在网络层数据包大小最大为1500字节, 去掉头部, 最大数据为1480字节
3. 差错检测
  通过校验和来验证头部是否正常, 通过反码求和算法, 
  将头部按16平均分开进行按位取反求和得到校验和,
  接收方依然将头部按16位平均分开与校验和进行按位取反求和, 如果结果取反为0则正常, 否则丢弃

[ARP协议]:
ARP协议为地址广播协议, 这是在局域网内通过ARP广播来获取对端的MAC地址
1. 在进行网络通信的过程中, 在同一局域网内的2台主机进行通信, 
发送端将数据发送到链路层之前需要知道对端的MAC地址, 因此通过ARP广播
将请求发送给局域网内的所有主机, 对端通过解析目的IP地址与自己的IP地址相同, 
然后将MAC地址返回给发送端
2. 每次ARP广播获取对端MAC地址之后, 会在发送端进行ARP缓存, 将目的IP与MAC建立映射,
下一次再发送时, 先检查ARP缓存.
[ARP欺骗]:
1. 因为ARP是通过广播来获取对端MAC地址的, 局域网内的所有主机都能接收到ARP请求.
本来不是请求我这台主机的MAC, 但是我可以将自己的MAC发给它或者将一个不存在的MAC发给他,
造成ARP欺骗

[ICMP协议]:
ICMP协议为网络控制报文协议, 用于主机, 路由器之间传递一些控制消息
1. 比如说ping这个命令就是基于ICMP协议的, 来检查网络是否畅通,
然后来报告一些控制信息, 比如说网络延迟, 数据包大小, TTL等

[IGMP协议]:
IGMP协议为网络组管理协议, 用于网络组播的协议
1. 比如说流媒体, 网络直播. 发送端将直播的内容发送到网络,
对端可以通过设置组播IP来收看直播. 
对端设置组播IP之后, 会通知网关根据IGMP协议, 
将流经该网关为组播IP的数据包发送给指定的主机,
同时IGMP协议还会周期性扫描该局域网还有没有参与组播的主机, 
如果没有就不会再接收组播数据包了

[IP协议]:
凡是实现了路由选择的协议都是IP协议 
1. 静态路由: 静态路由是有网络管理员自主配置的路由选择, 
也就是说数据的转发路径是固定的, 一般用于小型的网络可以
缺点就是如果该固定路径中有某个路由器发生错误, 就无法动态的选择其他的路径
2. 动态路由: 动态路由就是路由器能够建立路由表, 动态的去选择合适的转发路径
比如说RIP协议, 根据路由跳数来挑选路径, 选择可转发路径中跳数最少的路径
还有ospf协议, 根据网络带宽来挑选路径, 选择可转发路径中带宽最大的路径

[NAT]:
网络地址转换, 比如说局域网中的主机想要与外网主机进行通信, 需要用到NAT地址转换.
1. NAT就是将局域网内的主机的ip地址转换成唯一的可以直接与外网主机通信的ip地址,
这样外网中的主机在进行回复的时候, 能够准确的找到你的位置
2. 如果不使用NAT, 局域网内的主机可以给外网主机发送消息, 但是外网的主机回复的消息
不可达, 因为可能其他局域网的网段与我相同, 直接用局域网主机的ip, 对端不知道该
给谁回复.
3. NAT存在一定的局限性, 一个公网ip只能与一个私网建立映射, 如果说多个私网想
同时访问外网, 就需要PAT端口地址转换, 让一个公网ip通过不同端口来与多个私网ip
建立映射. 因此说, NAT没有节省ip, 而是PAT节省了ip


[地址管理, IP特性]:
  网络号+主机号
  网络号(网段): 用于区分网络
  主机号: 用于区分网络内的主机


[网络层的作用]:
  地址管理与路由选择
  1. 地址管理: 通过网段划分来实现地址管理
    1)早期的网段划分:
    A类: 0.0.0.0~127.255.255.255  (高8位中, 高1位为0, 第七位为网络号, 24位为主机号)
    B类: 128.0.0.0~191.255.255.255(高16位中, 高2位为10, 低14位为网络号, 16位为主机号)
    C类: 192.0.0.0~223.255.255.255(高24位中, 高3位为110, 低21位为网络号, 8位为主机号)
    D类: 224.0.0.0~239.255.255.255(高4位为1110)
    E类: 240.0.0.0~247.255.255.255(高5位为11110)

    2)新的网段划分:
    通过子网掩码来对地址进行更加灵活和细致的划分

    子网掩码: uint32_t, 数据由连续的二进制1组成
    子网掩码的作用:
      1. 网络号: IP & mask
      2. 主机号范围: ~mask

    公网与私网的划分, RFC1918所规定的几种能够组建私网的网络号:
    A类: 10.*.*.*    (学校, 公安局)
    B类: 172.16.*.*~172.31.*.*    (云服务器)
    C类: 192.168.*.*    (个人主机)

    特殊IP地址: 
    环回地址: 127.0.0.1
    本机任意地址: 0.0.0.0
    全网广播: 255.255.255.255
    网络地址: 网络中的最小主机号, 比如说192.168.163.0
    广播地址: 网络中的最大主机号, 比如说192.168.163.255

[IP子网划分]:
  子网划分是为了更充分的利用IP地址, 防止IP地址的浪费.
  比如说192.168.163.0这个c类地址划分成4段:
  默认子网掩码是255.255.255.0
  主机部分0~255划分成4段后: 0-64-128-192-255
  每个网段可用的地址范围: 1-62 65-126 129-190 193-254
  因此子网掩码要向右移动2位才能划分出4个网段: 255.255.255.192

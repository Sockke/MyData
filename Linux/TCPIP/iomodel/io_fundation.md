#### 阻塞与非阻塞, 同步与异步

* 简介

```
在处理IO的时候, 阻塞和非阻塞都是同步IO, 只有使用了特殊的API才是异步IO

在处理网络IO的时候, 会有2个阶段:
1. 数据准备

2. 数据读写

```

* 阻塞与非阻塞

```
数据准备阶段:
1. 这是讨论阻塞与非阻塞的阶段, 阻塞就是等待返回结果, 非阻塞就是不等待直接返回
2. 比如说recv, 如果sockfd是阻塞的, 那么如果没有数据可读, 就一直等待;
如果sockfd是非阻塞的, 无论是否有数据都直接返回
```

* IO的同步与异步

```
数据读写阶段:
1. 这是讨论IO同步与异步的阶段, 同步IO就是需要自己将内核缓冲区中的数据搬到应用缓冲区;
异步IO是系统将内核中的数据搬到用户提供的缓冲区中, 然后通知用户去进行数据读写.
2. 比如说recv就是一个同步IO, 无论是阻塞还是非阻塞都需要用户将内核缓冲区中的数据搬到应用缓冲区中才返回;
比如说Linux中的aio_read就是一个异步IO, 这是系统提供的特殊API来支持异步IO, 用户需要传入sockfd, buf, notice等重要的参数信息, 然后去做其他的事就可以了, 系统会将sockfd接收的数据从内核缓冲区搬到buf中, 然后根据用户提供的通知方式notice来通知用户进行数据读写.
```

* 业务的同步与异步

```
这里主要是指在多进程, 多线程环境下, 业务设计的方式.
同步就是指A需要阻塞等待B执行完毕之后才执行
异步就是指A不需要阻塞等待B执行完毕直接返回继续执行, 当B执行完毕后会通知A进行处理
```

